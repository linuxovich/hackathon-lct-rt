# Backend Service

## Описание

Этот сервис представляет собой backend для системы обработки документов с использованием машинного обучения. Сервис обеспечивает загрузку, обработку и анализ изображений документов с извлечением текста и именованных сущностей.

## Основные возможности

- **Загрузка файлов**: Поддержка загрузки файлов 
- **Обработка изображений**: Интеграция с ML pipeline для OCR 
- **Управление группами**: Организация файлов в группы с метаданными (фонд, опись, дело)
- **Генерация отчетов**: Создание отчетов в форматах XLSX и CSV с извлеченными данными

## Архитектура

### Технологический стек

- **FastAPI** - веб-фреймворк
- **Dramatiq** - система очередей задач
- **RabbitMQ** - брокер сообщений
- **Pydantic** - валидация данных
- **aiofiles** - асинхронная работа с файлами
- **openpyxl** - работа с Excel файлами

### Структура проекта

```
backend/
├── src/
│   ├── api/                    # API слой
│   │   ├── main_router.py     # Главный роутер
│   │   └── v1/                # API версии 1
│   │       ├── router.py      # Роутер v1
│   │       ├── endpoints/     # Эндпоинты
│   │       │   ├── files.py   # Управление файлами
│   │       │   ├── groups.py  # Управление группами
│   │       │   └── pipeline_callback.py # Callback от ML pipeline
│   │       └── schemas/        # Pydantic схемы
│   ├── core/                  # Конфигурация
│   │   └── configs.py         # Настройки приложения
│   ├── infra/                 # Инфраструктура
│   │   └── storage/          # Система хранения
│   ├── services/             # Бизнес-логика
│   │   └── report/           # Генерация отчетов
│   │   └── scheduler/	      # Скедулер для периодического дообучения
│   ├── tasks/                # Асинхронные задачи
│   │   ├── broker.py         # Настройка брокера
│   │   └── ml_tasks.py       # ML задачи
│   └── utils/                # Утилиты
├── main.py                   # Точка входа
├── Dockerfile               # Docker контейнер
